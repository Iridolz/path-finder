{"ast":null,"code":"var _jsxFileName = \"/home/bastien/delivery/perso/path-finder/src/components/Main.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { Stage, Layer, Rect, Text } from 'react-konva';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Main() {\n  _s();\n\n  const p = {\n    type: 0 // default rect type\n\n  };\n  const size = {\n    width: window.innerWidth,\n    height: window.innerHeight,\n    rect: window.innerWidth / 10,\n    rows: parseInt(window.innerHeight / (window.innerWidth / 10)),\n    columns: 10\n  };\n  const [tab, setTab] = useState(Array.from({\n    length: size.columns\n  }, () => Array.from({\n    length: size.rows\n  }, () => Object.create(p))));\n  const [path, setPath] = useState([]);\n\n  const finish = async prevMoves => {\n    console.log(path);\n\n    for (let i = 0; i < prevMoves.length; i++) {\n      let newTab = [...tab];\n      newTab[prevMoves[i][0]][prevMoves[i][1]].type = 5;\n      setTab(newTab);\n      await sleep(300);\n    }\n\n    console.log(' OK OK ');\n  }; // if (path.length !== 0) {\n  //     console.log(path)\n  //     for (let i = 0; i < path.length; i++) {\n  //         let newTab = [...tab]\n  //         newTab[path[i][0]][path[i][1]].type = 5\n  //         setTab(newTab)\n  //         await sleep(300)\n  //     }\n  //     console.log(' OK OK ')\n  // }\n  // Rect type\n\n\n  const RectType = [{\n    type: 0,\n    color: 'white',\n    name: 'empty'\n  }, {\n    type: 1,\n    color: 'black',\n    name: 'black'\n  }, {\n    type: 2,\n    color: 'green',\n    name: 'start'\n  }, {\n    type: 3,\n    color: 'red',\n    name: 'end'\n  }, {\n    type: 4,\n    color: 'grey',\n    name: 'checked'\n  }, {\n    type: 5,\n    color: 'blue',\n    name: 'path'\n  }];\n\n  const nextRectType = actual => {\n    return (actual + 1) % 4;\n  };\n\n  const getColorFromType = type => {\n    return RectType[type].color;\n  };\n\n  const RectOnClick = e => {\n    let newTab = [...tab];\n    newTab[e.i][e.n].type = nextRectType(tab[e.i][e.n].type);\n    setTab(newTab);\n  };\n\n  const isRectExist = (i, n) => {\n    if (0 > i || i > size.columns - 1) return false;\n    if (0 > n || n > size.rows - 1) return false;\n    if (tab[i][n].type === 1) return false;\n    return true;\n  };\n\n  const checkPrevMoves = (i, n, prevMoves) => {\n    // console.log(prevMoves)\n    for (let index = 0; index < prevMoves.length; index++) if (prevMoves[index][0] === i && prevMoves[index][1] === n) {\n      return false;\n    }\n\n    return true;\n  };\n\n  const updatePrevMoves = (i, n, prevMoves) => {\n    if (prevMoves.length >= 4) {\n      prevMoves.shift();\n      prevMoves.push([i, n]);\n      return prevMoves;\n    }\n\n    console.log(prevMoves);\n    prevMoves.push([i, n]);\n    return prevMoves;\n  };\n\n  function sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  const engine = async (i, n, prevMoves) => {\n    console.log(prevMoves);\n\n    if (path.length !== 0) {\n      return;\n    } // prevMoves = updatePrevMoves(i, n, prevMoves)\n\n\n    prevMoves.push([i, n]);\n\n    if (tab[i][n].type === 3) {\n      console.log('FINDED');\n      setPath(prevMoves);\n      finish(prevMoves);\n      return true;\n    }\n\n    let newTab = [...tab];\n    newTab[i][n].type = 4;\n    setTab(newTab);\n    await sleep(300);\n    var ret;\n\n    if (checkPrevMoves(i + 1, n, prevMoves) === true && isRectExist(i + 1, n) === true) {\n      ret = engine(i + 1, n, prevMoves);\n      if (ret === true) return;\n    }\n\n    if (checkPrevMoves(i - 1, n, prevMoves) === true && isRectExist(i - 1, n) === true) {\n      ret = engine(i - 1, n, prevMoves);\n      if (ret === true) return;\n    }\n\n    if (checkPrevMoves(i, n + 1, prevMoves) === true && isRectExist(i, n + 1) === true) {\n      ret = engine(i, n + 1, prevMoves);\n      if (ret === true) return;\n    }\n\n    if (checkPrevMoves(i, n - 1, prevMoves) === true && isRectExist(i, n - 1) === true) {\n      ret = engine(i, n - 1, prevMoves);\n      if (ret === true) return;\n    }\n\n    return [i, n];\n  };\n\n  const run = async () => {\n    let ret = await engine(0, 0, []);\n    console.log(ret);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Stage, {\n      width: size.width,\n      height: size.height,\n      children: /*#__PURE__*/_jsxDEV(Layer, {\n        children: [/*#__PURE__*/_jsxDEV(Text, {\n          x: 0,\n          y: 0,\n          text: \"RUN\",\n          fontSize: 100,\n          onClick: () => run()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 13\n        }, this), tab.map((row, i) => row.map((column, n) => /*#__PURE__*/_jsxDEV(Rect, {\n          i: i,\n          n: n,\n          x: i * size.rect,\n          y: size.rect + n * (size.height / size.rows),\n          width: size.rect,\n          height: size.rect,\n          fill: getColorFromType(column.type),\n          shadowBlur: 10,\n          onClick: e => RectOnClick(e.target.attrs)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 25\n        }, this)))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 147,\n    columnNumber: 7\n  }, this);\n}\n\n_s(Main, \"DHlEm+bjQoTTsNMcDvuupmHsSpc=\");\n\n_c = Main;\nexport default Main;\n\nvar _c;\n\n$RefreshReg$(_c, \"Main\");","map":{"version":3,"sources":["/home/bastien/delivery/perso/path-finder/src/components/Main.js"],"names":["React","useState","Stage","Layer","Rect","Text","Main","p","type","size","width","window","innerWidth","height","innerHeight","rect","rows","parseInt","columns","tab","setTab","Array","from","length","Object","create","path","setPath","finish","prevMoves","console","log","i","newTab","sleep","RectType","color","name","nextRectType","actual","getColorFromType","RectOnClick","e","n","isRectExist","checkPrevMoves","index","updatePrevMoves","shift","push","ms","Promise","resolve","setTimeout","engine","ret","run","map","row","column","target","attrs"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { Stage, Layer, Rect, Text } from 'react-konva';\n\nfunction Main() {\n    const p = {\n        type: 0 // default rect type\n    }\n\n    const size = {\n        width: window.innerWidth,\n        height: window.innerHeight,\n        rect: window.innerWidth / 10,\n        rows: parseInt(window.innerHeight / (window.innerWidth / 10)),\n        columns: 10,\n    }\n\n    const [tab, setTab] = useState(Array.from({length: size.columns},()=> Array.from({length: size.rows}, () => Object.create(p))));\n    const [path, setPath] = useState([])\n\n    const finish = async (prevMoves) => {\n        console.log(path)\n        for (let i = 0; i < prevMoves.length; i++) {\n            let newTab = [...tab]\n            newTab[prevMoves[i][0]][prevMoves[i][1]].type = 5\n            setTab(newTab)\n            await sleep(300)\n        }\n        console.log(' OK OK ')\n    }\n\n    // if (path.length !== 0) {\n    //     console.log(path)\n    //     for (let i = 0; i < path.length; i++) {\n    //         let newTab = [...tab]\n    //         newTab[path[i][0]][path[i][1]].type = 5\n    //         setTab(newTab)\n    //         await sleep(300)\n    //     }\n    //     console.log(' OK OK ')\n    // }\n\n    // Rect type\n    const RectType = [\n        {type: 0, color: 'white', name: 'empty'},\n        {type: 1, color: 'black', name: 'black'},\n        {type: 2, color: 'green', name: 'start'},\n        {type: 3, color: 'red', name: 'end'},\n        {type: 4, color: 'grey', name: 'checked'},\n        {type: 5, color: 'blue', name: 'path'},\n    ]\n\n    const nextRectType = (actual) => {\n        return (actual + 1) % 4\n    }\n\n    const getColorFromType = (type) => {\n        return RectType[type].color\n    }\n\n    const RectOnClick = (e) => {\n        let newTab = [...tab]\n        newTab[e.i][e.n].type = nextRectType(tab[e.i][e.n].type)\n        setTab(newTab)\n    }\n\n    const isRectExist = (i, n) => {\n        if (0 > i || i > size.columns - 1)\n            return false\n        if (0 > n || n > size.rows - 1)\n            return false\n        if (tab[i][n].type === 1)\n            return false\n        return true\n    }\n\n    const checkPrevMoves = (i, n, prevMoves) => {\n        // console.log(prevMoves)\n        for (let index = 0; index < prevMoves.length; index++)\n            if (prevMoves[index][0] === i && prevMoves[index][1] === n) {\n                return false\n            }\n        return true\n    }\n\n    const updatePrevMoves = (i, n, prevMoves) => {\n        if (prevMoves.length >= 4) {\n            prevMoves.shift()\n            prevMoves.push([i, n])\n            return prevMoves\n        }\n        console.log(prevMoves)\n        prevMoves.push([i, n])\n        return prevMoves\n    }\n\n    function sleep(ms) {\n        return new Promise(resolve => setTimeout(resolve, ms));\n    }\n\n    const engine = async (i, n, prevMoves) => {\n        console.log(prevMoves)\n        if (path.length !== 0) {\n            return\n        }\n        // prevMoves = updatePrevMoves(i, n, prevMoves)\n        prevMoves.push([i, n])\n        if (tab[i][n].type === 3) {\n            console.log('FINDED')\n            setPath(prevMoves)\n            finish(prevMoves)\n            return true;\n        }\n        let newTab = [...tab]\n        newTab[i][n].type = 4\n        setTab(newTab)\n        await sleep(300)\n        var ret;\n        if (checkPrevMoves(i + 1, n, prevMoves) === true && isRectExist(i + 1, n) === true) {\n            ret = engine(i + 1, n, prevMoves)\n            if (ret === true)\n                return\n        }\n        if (checkPrevMoves(i - 1, n, prevMoves) === true && isRectExist(i - 1, n) === true) {\n            ret = engine(i - 1, n, prevMoves)\n            if (ret === true)\n                return\n        }\n        if (checkPrevMoves(i, n + 1, prevMoves) === true && isRectExist(i, n + 1) === true) {\n            ret = engine(i, n + 1, prevMoves)\n            if (ret === true)\n                return\n        }\n        if (checkPrevMoves(i, n - 1, prevMoves) === true && isRectExist(i, n - 1) === true) {\n            ret = engine(i, n - 1, prevMoves)\n            if (ret === true)\n                return\n        }\n        return [i, n]\n    }\n\n    const run = async () => {\n        let ret = await engine(0, 0, [])\n        console.log(ret)\n    }\n\n    return (\n      <div>\n        <Stage width={size.width} height={size.height}>\n          <Layer>\n            <Text\n            x={0}\n            y={0}\n            text='RUN'\n            fontSize={100}\n            onClick={() => run()}\n            />\n            {\n                tab.map((row, i) => (\n                    row.map((column, n) => (\n                        <Rect\n                        i={i}\n                        n={n}\n                        x={i * (size.rect)}\n                        y={(size.rect) + n * (size.height / size.rows)}\n                        width={(size.rect)}\n                        height={(size.rect)}\n                        fill={getColorFromType(column.type)}\n                        shadowBlur={10}\n                        onClick={e => RectOnClick(e.target.attrs)}\n                        />\n                    ))\n                ))\n            }\n          </Layer>\n        </Stage>\n      </div>\n    );\n  }\n\nexport default Main;\n"]},"metadata":{},"sourceType":"module"}