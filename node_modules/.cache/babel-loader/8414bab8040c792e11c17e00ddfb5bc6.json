{"ast":null,"code":"var _jsxFileName = \"/home/bastien/delivery/perso/path-finder/src/components/Main.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { Stage, Layer, Rect, Text } from 'react-konva';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Main() {\n  _s();\n\n  const mapSize = 8;\n  const p = {\n    type: 0 // default rect type\n\n  };\n  const [tab, setTab] = useState(Array.from({\n    length: mapSize\n  }, () => Array.from({\n    length: mapSize\n  }, () => Object.create(p)))); // Rect type\n\n  const RectType = [{\n    type: 0,\n    color: 'white',\n    name: 'empty'\n  }, {\n    type: 1,\n    color: 'black',\n    name: 'black'\n  }, {\n    type: 2,\n    color: 'green',\n    name: 'start'\n  }, {\n    type: 3,\n    color: 'red',\n    name: 'end'\n  }, {\n    type: 4,\n    color: 'grey',\n    name: 'checked '\n  }];\n\n  const nextRectType = actual => {\n    return (actual + 1) % 4;\n  };\n\n  const getColorFromType = type => {\n    return RectType[type].color;\n  };\n\n  const RectOnClick = e => {\n    let newTab = [...tab];\n    newTab[e.i][e.n].type = nextRectType(tab[e.i][e.n].type);\n    setTab(newTab);\n  };\n\n  const isRectExist = (i, n) => {\n    if (0 > i || i > mapSize - 1) return false;\n    if (0 > n || n > mapSize - 1) return false;\n    return true;\n  };\n\n  const checkPrevMoves = (i, n, prevMoves) => {\n    console.log(prevMoves);\n    console.log(prevMoves[0][0]);\n\n    for (let index = 0; index < prevMoves.length; index++) if (prevMoves[index][0] === i && prevMoves[index][1] === n) {\n      return false;\n    }\n\n    return true;\n  };\n\n  const updatePrevMoves = (i, n, prevMoves) => {\n    // if (prevMoves.length >= 4) {\n    //     prevMoves.shift()\n    //     prevMoves.push([i, n])\n    //     return\n    // }\n    prevMoves.push([i, n]);\n  };\n\n  function sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  const engine = async (i, n, prevMoves) => {\n    // console.log(prevMoves)\n    // updatePrevMoves(i, n, prevMoves)\n    prevMoves.push([i, n]);\n    let newTab = [...tab];\n    newTab[i][n].type = 4;\n    setTab(newTab);\n    await sleep(2000);\n    if (checkPrevMoves(i + 1, n, prevMoves) === true && isRectExist(i + 1, n) === true) prevMoves.push(engine(i + 1, n, prevMoves));\n    if (checkPrevMoves(i - 1, n, prevMoves) === true && isRectExist(i - 1, n) === true) prevMoves.push(engine(i - 1, n, prevMoves));\n    if (checkPrevMoves(i, n + 1, prevMoves) === true && isRectExist(i, n + 1) === true) prevMoves.push(engine(i, n + 1, prevMoves));\n    if (checkPrevMoves(i, n - 1, prevMoves) === true && isRectExist(i, n - 1) === true) prevMoves.push(engine(i, n - 1, prevMoves));\n    return [i, n];\n    setTimeout(() => {\n      if (checkPrevMoves(i + 1, n, prevMoves) === true && isRectExist(i + 1, n) === true) prevMoves.push(engine(i + 1, n, prevMoves));\n      if (checkPrevMoves(i - 1, n, prevMoves) === true && isRectExist(i - 1, n) === true) prevMoves.push(engine(i - 1, n, prevMoves));\n      if (checkPrevMoves(i, n + 1, prevMoves) === true && isRectExist(i, n + 1) === true) prevMoves.push(engine(i, n + 1, prevMoves));\n      if (checkPrevMoves(i, n - 1, prevMoves) === true && isRectExist(i, n - 1) === true) prevMoves.push(engine(i, n - 1, prevMoves));\n      return [i, n];\n    }, 1000);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Stage, {\n      width: window.innerWidth,\n      height: window.innerHeight,\n      children: /*#__PURE__*/_jsxDEV(Layer, {\n        children: [/*#__PURE__*/_jsxDEV(Text, {\n          x: 0,\n          y: 0,\n          text: \"RUN\",\n          fontSize: 100,\n          onClick: () => engine(0, 0, new Array())\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }, this), tab.map((row, i) => row.map((column, n) => /*#__PURE__*/_jsxDEV(Rect, {\n          i: i,\n          n: n,\n          x: 10 + i * 100,\n          y: 100 + n * 100,\n          width: 100,\n          height: 100,\n          fill: getColorFromType(column.type),\n          shadowBlur: 10,\n          onClick: e => RectOnClick(e.target.attrs)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 25\n        }, this)))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 7\n  }, this);\n}\n\n_s(Main, \"I+r22YBdK5w9+RzBN26BepUK78M=\");\n\n_c = Main;\nexport default Main;\n\nvar _c;\n\n$RefreshReg$(_c, \"Main\");","map":{"version":3,"sources":["/home/bastien/delivery/perso/path-finder/src/components/Main.js"],"names":["React","useState","Stage","Layer","Rect","Text","Main","mapSize","p","type","tab","setTab","Array","from","length","Object","create","RectType","color","name","nextRectType","actual","getColorFromType","RectOnClick","e","newTab","i","n","isRectExist","checkPrevMoves","prevMoves","console","log","index","updatePrevMoves","push","sleep","ms","Promise","resolve","setTimeout","engine","window","innerWidth","innerHeight","map","row","column","target","attrs"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { Stage, Layer, Rect, Text } from 'react-konva';\n\nfunction Main() {\n    const mapSize = 8\n    const p = {\n        type: 0 // default rect type\n    }\n\n    const [tab, setTab] = useState(Array.from({length: mapSize},()=> Array.from({length: mapSize}, () => Object.create(p))));\n\n    // Rect type\n    const RectType = [\n        {type: 0, color: 'white', name: 'empty'},\n        {type: 1, color: 'black', name: 'black'},\n        {type: 2, color: 'green', name: 'start'},\n        {type: 3, color: 'red', name: 'end'},\n        {type: 4, color: 'grey', name: 'checked '},\n    ]    \n\n    const nextRectType = (actual) => {\n        return (actual + 1) % 4\n    }\n\n    const getColorFromType = (type) => {\n        return RectType[type].color\n    }\n\n    const RectOnClick = (e) => {\n        let newTab = [...tab]\n        newTab[e.i][e.n].type = nextRectType(tab[e.i][e.n].type)\n        setTab(newTab)\n    }\n\n    const isRectExist = (i, n) => {\n        if (0 > i || i > mapSize - 1)\n            return false\n        if (0 > n || n > mapSize - 1)\n            return false\n        return true\n    }\n\n    const checkPrevMoves = (i, n, prevMoves) => {\n        console.log(prevMoves)\n        console.log(prevMoves[0][0])\n        for (let index = 0; index < prevMoves.length; index++)\n            if (prevMoves[index][0] === i && prevMoves[index][1] === n) {\n                return false\n            }\n        return true\n    }\n\n    const updatePrevMoves = (i, n, prevMoves) => {\n        // if (prevMoves.length >= 4) {\n        //     prevMoves.shift()\n        //     prevMoves.push([i, n])\n        //     return\n        // }\n        prevMoves.push([i, n])\n    }\n\n    function sleep(ms) {\n        return new Promise(resolve => setTimeout(resolve, ms));\n    }\n\n    const engine = async (i, n, prevMoves) => {\n        // console.log(prevMoves)\n        // updatePrevMoves(i, n, prevMoves)\n        prevMoves.push([i, n])\n        let newTab = [...tab]\n        newTab[i][n].type = 4\n        setTab(newTab)\n        await sleep(2000)\n        if (checkPrevMoves(i + 1, n, prevMoves) === true && isRectExist(i + 1, n) === true)\n            prevMoves.push(engine(i + 1, n, prevMoves))\n        if (checkPrevMoves(i - 1, n, prevMoves) === true && isRectExist(i - 1, n) === true)\n            prevMoves.push(engine(i - 1, n, prevMoves))\n        if (checkPrevMoves(i, n + 1, prevMoves) === true && isRectExist(i, n + 1) === true)\n            prevMoves.push(engine(i, n + 1, prevMoves))\n        if (checkPrevMoves(i, n - 1, prevMoves) === true && isRectExist(i, n - 1) === true)\n            prevMoves.push(engine(i, n - 1, prevMoves))\n        return [i, n]\n        setTimeout(() => {\n            if (checkPrevMoves(i + 1, n, prevMoves) === true && isRectExist(i + 1, n) === true)\n            prevMoves.push(engine(i + 1, n, prevMoves))\n            if (checkPrevMoves(i - 1, n, prevMoves) === true && isRectExist(i - 1, n) === true)\n                prevMoves.push(engine(i - 1, n, prevMoves))\n            if (checkPrevMoves(i, n + 1, prevMoves) === true && isRectExist(i, n + 1) === true)\n                prevMoves.push(engine(i, n + 1, prevMoves))\n            if (checkPrevMoves(i, n - 1, prevMoves) === true && isRectExist(i, n - 1) === true)\n                prevMoves.push(engine(i, n - 1, prevMoves))\n            return [i, n]\n        }, 1000)\n    }\n\n    return (\n      <div>\n        <Stage width={window.innerWidth} height={window.innerHeight}>\n          <Layer>\n            <Text\n            x={0}\n            y={0}\n            text='RUN'\n            fontSize={100}\n            onClick={() => engine(0, 0, new Array)}\n            />\n            {\n                tab.map((row, i) => (\n                    row.map((column, n) => (\n                        <Rect\n                        i={i}\n                        n={n}\n                        x={10 + i * 100}\n                        y={100 + n * 100}\n                        width={100}\n                        height={100}\n                        fill={getColorFromType(column.type)}\n                        shadowBlur={10}\n                        onClick={e => RectOnClick(e.target.attrs)}\n                        />\n                    ))\n                ))\n            }\n          </Layer>\n        </Stage>\n      </div>\n    );\n  }\n\nexport default Main;\n"]},"metadata":{},"sourceType":"module"}